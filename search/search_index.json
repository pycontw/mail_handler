{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#mail-handler","title":"Mail Handler","text":"<p>Generate emails through the template and send mails. If you are user of Mail Handler, please refer to this docs.</p>"},{"location":"#prerequisite","title":"Prerequisite","text":"<ul> <li>Python 3</li> <li>click</li> </ul>"},{"location":"#usage","title":"Usage","text":"<p>This CLI tool is designed as two steps to avoid accidental sending.</p>"},{"location":"#step-1-install-pycontw-mail-handler-through-pipx-or-install-in-your-virtual-environment","title":"Step 1: Install pycontw-mail-handler through pipx (or install in your virtual environment)","text":"<pre><code># Install pipx\npython -m pip install pipx\n\n# Install pycontw-mail-hanlder through pipx\npython -m pipx install pycontw-mail-handler\n</code></pre> <p>After install <code>pycontw-mail-handler</code>, you can run <code>render_mail</code> and <code>send_mail</code> commands in your environment.</p>"},{"location":"#step-2-generate-mails-through-the-template","title":"Step 2: Generate mails through the template","text":"<pre><code>render_mail [OPTIONS] TEMPLATE_PATH RECEIVER_DATA\n\nOptions:\n  --mails_path PATH  [default: mails_to_sent]\n  --separator ' TEXT '\n  --unique_csv PATH\n</code></pre> <ul> <li><code>TEMPLATE_PATH</code>: The path to the jinja2 template.</li> <li><code>RECEIVER_DATA</code>: The path to receivers' data.<ul> <li>The following json sample is the least required content. All other data can be added to fit the need of the template.</li> <li>\"common_data\": Common data used in each mail</li> <li>\"unique_data\": Unique content for each mail</li> </ul> </li> </ul> <pre><code>{\n    \"common_data\": {},\n    \"unique_data\": [\n        {\"receiver_email\": \"somerec@somedomain\"}\n    ]\n}\n</code></pre> <p>Please note the comma is able to be used as a receiver separator to send multiple people. For example, the following 3 formats are all working:</p> <p>A space following a comma</p> <pre><code>{\n    \"common_data\": {},\n    \"unique_data\": [\n        {\"receiver_email\": \"somerec01@somedomain, somerec02@somedomain\"}\n    ]\n}\n</code></pre> <p>No space following a comma</p> <pre><code>{\n    \"common_data\": {},\n    \"unique_data\": [\n        {\"receiver_email\": \"somerec01@somedomain,somerec02@somedomain\"}\n    ]\n}\n</code></pre> <p>Or mix both of the above two types</p> <pre><code>{\n    \"common_data\": {},\n    \"unique_data\": [\n        {\"receiver_email\": \"somerec01@somedomain, somerec02@somedomain,somerec03@somedomain\"}\n    ]\n}\n</code></pre> <ul> <li><code>--mails_path PATH</code>: The output path of the mails. The mail will be named as the receivers email address.</li> </ul> <p>Usage example:</p> <pre><code>render_mail  ./templates/sponsorship/spam_sponsors_2020.j2 examples/sponsorship/spam_sponsors_2020.json\n</code></pre>"},{"location":"#step-3-send-the-generated-mails","title":"Step 3: Send the generated mails","text":"<pre><code>send_mail [OPTIONS] CONFIG_PATH\n\nOptions:\n  --mails_path PATH  [default: mails_to_sent]\n  --attachment_file PATH\n</code></pre> <ul> <li><code>CONFIG_PATH</code>: The path to mail config.</li> </ul> <pre><code>{\n    \"Subject\": \"some subject\",\n    \"From\": \"somebody@somedomain\",\n    \"SenderName\": \"your name\",\n    \"CC\": \"somebody1@somedomain, somebody2@somedomain\"\n}\n</code></pre> <p>Please note the comma is used as a receiver separator to send multiple people.</p> <ul> <li><code>--mails_path PATH</code>: The path of the mails to sent.</li> </ul> <p>Usage example:</p> <pre><code>send_mail ./examples/sponsorship/spam_sponsors_2020_mail_config.json\n</code></pre> <p>By issuing the <code>send_mail.py</code> command, you will be prompted to input the corresponding password of your smtp server.</p> <pre><code>You are about to send the mails under \"mails_to_sent\". Do you want to continue? [y/N]: y\nUsing default Gmail SMTP server...\nPlease enter your mail account: &lt;sender email address in mail config&gt;\nPlease enter you mail password:\nINFO:root:Email sent to &lt;receiver address in RECEIVER_DATA&gt;!\n</code></pre> <p>Currently we use smtp server of <code>gmail</code> as default, so you may want to use the one-time app password for security concern. To use gmail one-time app password, please go to <code>Manage your Goolge Account &gt; Security &gt; Signning to Google &gt; App passwords</code> and then <code>Select app &gt; Other</code> to generate your one-time app password. The generated password could be removed anytime if you are sure that you won't use it anymore. If you would like to use specific smtp server, please refer user guide.</p>"},{"location":"#contributing","title":"Contributing","text":"<p>See Contributing</p>"},{"location":"#authors","title":"Authors","text":"<p>Lee-W</p> <p>Created from Lee-W/cookiecutter-python-template version 1.9.2</p>"},{"location":"contributing/","title":"Contributing","text":""},{"location":"contributing/#step-1-fork-this-repository-to-your-github","title":"Step 1. Fork this repository to your GitHub","text":""},{"location":"contributing/#step-2-clone-the-repository-from-your-github","title":"Step 2. Clone the repository from your GitHub","text":"<pre><code>git clone https://github.com/[YOUR GITHUB ACCOUNT]/mail_handler.git\n</code></pre>"},{"location":"contributing/#step-3-add-this-repository-to-the-remote-in-your-local-repository","title":"Step 3. Add this repository to the remote in your local repository","text":"<pre><code>git remote add upstream \"https://github.com/pycontw/mail_handler\"\n</code></pre> <p>You can pull the latest code in master branch through <code>git pull upstream master</code> afterward.</p>"},{"location":"contributing/#step-4-check-out-a-branch-for-your-new-feature","title":"Step 4. Check out a branch for your new feature","text":"<pre><code>git checkout -b [YOUR FEATURE]\n</code></pre>"},{"location":"contributing/#step-5-install-prerequisite","title":"Step 5. Install prerequisite","text":"<pre><code>python -m pip install pipx\npython -m pipx install poetry invoke\npython -m pipx ensurepath\n</code></pre> <ul> <li>pipx: for python tool management</li> <li>poetry: for dependency management</li> <li>invoke: for task management</li> </ul>"},{"location":"contributing/#step-6-create-your-local-python-virtual-environment-and-install-dependencies","title":"Step 6. Create your local Python virtual environment and install dependencies","text":"<pre><code>inv env.init-dev\n</code></pre>"},{"location":"contributing/#step-7-work-on-your-new-feature","title":"Step 7. Work on your new feature","text":"<p>Note that this project follows conventional-commit and bumps version based on it. Use the following command to commit your changes.</p> <pre><code>inv git.commit\n</code></pre>"},{"location":"contributing/#step-8-run-test-cases","title":"Step 8. Run test cases","text":"<p>Make sure all test cases pass.</p> <pre><code>inv test\n</code></pre>"},{"location":"contributing/#step-9-run-test-coverage","title":"Step 9. Run test coverage","text":"<p>Check the test coverage and see where you can add test cases.</p> <pre><code>inv test.cov\n</code></pre>"},{"location":"contributing/#step-10-reformat-source-code","title":"Step 10. Reformat source code","text":"<p>Format your code through <code>black</code> and <code>isort</code>.</p> <pre><code>inv style.reformat\n</code></pre>"},{"location":"contributing/#step-11-run-style-check","title":"Step 11. Run style check","text":"<p>Make sure your coding style passes all enforced linters.</p> <pre><code>inv style\n</code></pre> <p>[Optional] Check your coding style through <code>pylint</code>. Note that you do not have to fix all the issues warned by <code>pylint</code>.</p> <pre><code>inv style.pylint\n</code></pre>"},{"location":"contributing/#step-12-run-security-check","title":"Step 12. Run security check","text":"<p>Ensure the packages installed are secure, and no server vulnerability is introduced</p> <pre><code>inv secure\n</code></pre>"},{"location":"contributing/#step-13-create-a-pull-request-and-celebrate","title":"Step 13. Create a Pull Request and celebrate \ud83c\udf89","text":""},{"location":"user_guide/","title":"pycontw-mail-handler \u4f7f\u7528\u624b\u518a","text":""},{"location":"user_guide/#_1","title":"\u5efa\u7acb\u4fe1\u4ef6\u5167\u5bb9","text":""},{"location":"user_guide/#render_mail-options-template_path-receiver_data","title":"<code>render_mail [OPTIONS] TEMPLATE_PATH RECEIVER_DATA</code>","text":"<ul> <li>[OPTIONS] <code>--mails_path PATH  [default: mails_to_sent]</code>\uff1a\u5132\u5b58\u4fe1\u4ef6\u5167\u5bb9\u4f4d\u7f6e\uff0c\u9810\u8a2d\u6703\u65b0\u589e\u65bc\u7576\u524d\u76ee\u9304\u4e0b\u65b0\u589e\u7684 mails_to_sent \u7684\u8cc7\u6599\u593e\u4e2d   <code>--separator ' TEXT '</code>\uff1a\u8a2d\u5b9a\u8f38\u51fa\u4fe1\u4ef6\u6a94\u540d\u5206\u9694\u7b26\u865f/\u6587\u5b57</li> <li>TEMPLATE_PATH\uff1a\u5167\u5bb9\u57fa\u672c\u683c\u5f0f\u6a94\u6848\u4f4d\u7f6e\uff0c\u63a5\u53d7 .j2 \u6a94\u6848</li> <li>RECEIVER_DATA\uff1a\u9700\u66ff\u63db\u7684\u8f38\u5165\u8cc7\u6599\u6a94\u6848\u4f4d\u7f6e\uff0c\u63a5\u53d7 .json \u6a94\u6848<ul> <li>\u9810\u8a2d\u9700\u6709\u4ee5\u4e0b\u683c\u5f0f\u8cc7\u8a0a     <code>{         \"common_data\": {},         \"unique_data\": [             {\"receiver_email\": \"somerec@somedomain\"}         ]     }</code></li> <li>common_data\uff1a\u6bcf\u5c01 email \u5171\u7528\u4e4b\u8cc7\u6599</li> <li>unique_data\uff1a\u6bcf\u5c01 email \u6240\u9700\u7279\u5b9a\u8cc7\u6599</li> </ul> </li> </ul>"},{"location":"user_guide/#_2","title":"\u4f7f\u7528\u7bc4\u4f8b","text":"<ul> <li>\u4fee\u6539 template \u6587\u4ef6\uff08\u53ef\u53c3\u8003 sponsors_invite.j2 \u64b0\u5beb\uff09</li> <li>\u6b32\u4f7f\u7528 HTML \u5bc4\u51fa\u4fe1\u4ef6\uff0c\u53ef\u53c3\u8003 reviewer_html.j2 \u7de8\u5beb</li> <li> <p>\u4fee\u6539 receiver data \u6587\u4ef6\uff08\u53ef\u53c3\u8003 sponsors_invite \u64b0\u5beb\uff09 </p> </li> <li> <p>\u4f7f\u7528 render_mail \u8f38\u51fa\u4fe1\u4ef6\u5167\u5bb9     <code>render_mail templates/sponsorship/spam_sponsors_2020 examples/sponsorship/spam_sponsors_2020.json</code></p> <ul> <li>templates \u7684\u8cc7\u6599\u593e\u4e0b\u53ef\u53c3\u8003\u7bc4\u4f8b jinja \u683c\u5f0f\u6a94\u6848</li> <li>examples \u8cc7\u6599\u593e\u4e0b\u53ef\u53c3\u8003 receiver data \u7bc4\u4f8b json \u683c\u5f0f\u6a94\u6848</li> <li>\u5982\u6dfb\u52a0 <code>--separator '-'</code>\uff0c\u5247\u8f38\u51fa\u4fe1\u4ef6\u6a94\u540d\u70ba {receiveremail}-{receviername} <code>render_mail --separator '-' &lt;TEMPLATE_PATH&gt; &lt;RECEIVER_DATA&gt;</code></li> </ul> </li> <li>\u5b8c\u6210\u5f8c\u6703\u5728\u76ee\u9304\u4e0b\u5efa\u7acb\u4e00\u500b mails_to_sent \u7684\u8cc7\u6599\u593e\uff0c\u5167\u6709\u4ee5receiver_email \u70ba\u6a94\u540d\u4e4b\u6a94\u6848\uff0c\u78ba\u8a8d\u8f38\u51fa\u7121\u8aa4</li> <li>\u82e5\u70ba HTML \u683c\u5f0f\u7684\u4fe1\u4ef6\u6703\u5e36\u6709 <code>.html</code> \u7684\u526f\u6a94\u540d\uff1b\u82e5\u70ba\u7d14\u6587\u5b57\u7684\u4fe1\u4ef6\u5247\u6703\u5e36\u6709 <code>.txt</code> \u7684\u526f\u6a94\u540d </li> <li>\u78ba\u8a8d\u5167\u6587 </li> </ul>"},{"location":"user_guide/#_3","title":"\u5bc4\u51fa","text":""},{"location":"user_guide/#send_mail-options-config_path","title":"<code>send_mail [OPTIONS] CONFIG_PATH</code>","text":"<ul> <li>[OPTIONS] <code>--mails_path PATH  [default: mails_to_sent]</code>\uff1a\u4fe1\u4ef6\u5167\u5bb9\u6a94\u6848\u593e\u4f4d\u7f6e\uff0c\u9810\u8a2d\u70ba mails_to_sent\uff0c\u5982\u975e\u9810\u8a2d\u4f4d\u7f6e\u624d\u4f7f\u7528   <code>--attachment_file PATH</code>\uff1a\u5982\u9700\u593e\u5e36\u9644\u4ef6\u53ef\u4f7f\u7528\u6b64\u586b\u5beb\u9644\u4ef6\u6a94\u6848\u4f4d\u7f6e   <code>--separator ' TEXT '</code>\uff1a<code>render_mail</code> \u5982\u6709\u4f7f\u7528\u5230 separator \u5247\u6b64\u4e5f\u5fc5\u9808\u52a0\u4e0a\u76f8\u540c\u9805\u76ee</li> <li>CONFIG_PATH\uff1a\u5bc4\u4ef6\u8005\u8cc7\u6599\u8a2d\u5b9a\u6a94\uff0c\u63a5\u53d7 .json \u6a94\u6848<ul> <li>\u9700\u5177\u5099\u4ee5\u4e0b\u683c\u5f0f\u8cc7\u8a0a\uff0c\u4ee5 <code>,</code> \u5206\u9694\u591a\u500b\u6536\u4ef6\u8005 <code>{     \"Subject\": \"some subject\",     \"From\": \"somebody@somedomain\",     \"SenderName\": \"your name\",     \"CC\": \"somebody1@somedomain, somebody2@somedomain\" }</code></li> <li>\u6b32\u4f7f\u7528\u81ea\u8a02 SMTP Server \uff0c\u5728\u6b64\u8a2d\u5b9a\u6a94\u5167\u65b0\u589e <code>{       ...     \"SMTP\": {         \"Host\": \"some smtp server\",         \"Port\": 465     } }</code></li> </ul> </li> </ul>"},{"location":"user_guide/#_4","title":"\u4f7f\u7528\u7bc4\u4f8b","text":"<ul> <li>\u4fee\u6539 config \u6a94\u6848\u5167\u5bb9\uff08\u53ef\u53c3\u8003 mail_config.json \u64b0\u5beb\u3002\u5982\u6b32\u4f7f\u7528\u81ea\u8a02 SMTP server\uff0c\u8acb\u53c3\u8003 mail_config_smtp.json\u3002\uff09</li> <li>\u4f7f\u7528 send_mail \u5bc4\u9001 mail_to_sent \u8cc7\u6599\u593e\u5167\u4e4b\u4fe1\u4ef6     <code>send_mail examples/sponsorship/spam_sponsors_2020_mail_config.json</code><ul> <li>\u5982\u5728 render_mail \u6642\u6709\u4f7f\u7528\u5230 <code>--separator</code> \u9808\u52a0\u4e0a\u76f8\u540c\u53c3\u6578     <code>send_mail --separator '-' &lt;CONFIG_FILE_PATH&gt;</code></li> </ul> </li> <li>\u7cfb\u7d71\u8a62\u554f\u662f\u5426\u78ba\u8a8d\u5bc4\u51fa\uff0c\u8f38\u5165 <code>y</code> <code>You are about to send the mails under \"mails_to_sent\". Do you want to continue? [y/N]:  y</code></li> <li>\u7cfb\u7d71\u63d0\u793a\u4f7f\u7528\u9810\u8a2d Gmail SMTP server \u6216\u662f\u81ea\u8a02 SMTP server</li> <li>\u9810\u8a2d     <code>Using default Gmail SMTP server...</code></li> <li>\u81ea\u8a02     <code>Using configured SMTP server \"some smtp server:465\"...</code></li> <li>\u8f38\u5165\u5bc4\u4ef6\u8005 email account (\u6b32\u4f7f\u7528\u9810\u8a2d Gmail SMTP server \u8acb\u8f38\u5165 gmail \u5e33\u865f)     <code>Please enter your mail account: xxxxxxxx@gmail.com</code></li> <li>\u8f38\u5165\u8a2d\u5b9a\u904e\u7684 password (\u8a2d\u5b9a\u65b9\u5f0f\u8acb\u53c3\u8003 \u9a57\u8b49\u554f\u984c \u90e8\u5206\u9032\u884c\u8a2d\u5b9a)     <code>Please enter you mail password: xxxxxxxx</code></li> <li>\u5bc4\u9001\u6210\u529f\u7cfb\u7d71\u6703\u986f\u793a\u4ee5\u4e0b\u8cc7\u8a0a     <code>Email sent to xxxxxxxx@gmail.com!</code></li> <li>\u6536\u4ef6\u8005\u6536\u5230\u7684\u900f\u904e mail handler \u5bc4\u9001\u7684\u4fe1\u4ef6 </li> </ul>"},{"location":"user_guide/#_5","title":"\u9a57\u8b49\u554f\u984c","text":"<ul> <li>\u5728 \u767b\u5165 Google \u7684\u90e8\u5206\u4e2d\uff0c\u5c07 \u5169\u6b65\u9a5f\u9a57\u8b49 \u4fee\u6539\u70ba \u958b\u555f\uff0c\u958b\u555f\u5f8c\u6703\u51fa\u73fe \u61c9\u7528\u7a0b\u5f0f\u5bc6\u78bc \u6b04\u4f4d\uff0c\u9ede\u9078 </li> <li>\u9078\u64c7 \u5176\u4ed6(\u81ea\u8a02\u540d\u7a31)\uff0c\u96a8\u610f\u586b\u5165\u540d\u7a31\u53ef\u8fa8\u8b58\u70ba\u4f55\u7a2e\u7528\u9014\u5373\u53ef\uff0c\u9ede\u9078\u7522\u751f </li> <li>\u6b64\u6642\u6703\u8df3\u51fa \u7cfb\u7d71\u7522\u751f\u7684\u61c9\u7528\u7a0b\u5f0f\u5bc6\u78bc \u8996\u7a97\uff0c\u8a18\u4e0b\u6b64\u7d44\u5bc6\u78bc\uff0c\u6b64\u7d44\u5bc6\u78bc\u5373\u5728\u4f7f\u7528 mail handler \u6642\u6240\u9700\u7684 password </li> </ul>"},{"location":"user_guide/#_6","title":"\u88dc\u5145 / \u5e38\u898b\u554f\u984c","text":"<ul> <li>\u5982\u9700\u5b89\u88dd\u8acb\u53c3\u8003 pycontw/mail_handler@GitHub</li> </ul>"}]}